(function(b){var B,h,l="responsiveTable",t="Container",p="overflow",u="Static",m=p+t,v="static"+t,w="nth-child",x='<div class="',y=!1,C=["thead","","tbody","tfoot"],f,k,c,q,d,n,r,s,z;b.fn.responsiveTable=function(e){function F(a,c){var d=l+"UiHint";if(0==b("#"+d).length){s=b('<div id="'+d+'">&lt;&lt; Scroll table left and right &gt;&gt;</div>');b("body").prepend(s);var g=h.height()/2;0<c.top&&0<a.height()&&(g=c.top+0.4*a.height());s.css({position:"absolute","z-index":1E6,padding:"0.5em","background-color":"#888", color:"#eee","font-size":"1.1em","border-radius":"0.6em"}).css({top:g,left:h.width()/2-s.width()/2})}setTimeout('$("#'+d+'").hide();',e.scrollHintDuration)}function A(a){a=a.parent();return{rtc:a.parent(),oc:a,sc:a.parent().find("."+v)}}function D(a,b){c=A(a);c.oc.width(c.rtc.innerWidth()-c.sc.outerWidth()-b);e.scrollRight&&c.oc.scrollLeft(a.width())}function G(a){if(!a.parent().hasClass(m)){var h=a.offset();a.wrap(x+l+t+'" style="'+p+':hidden;"/>');d=b("<table/>");b.each(a[0].attributes,function(a, b){"id"!==b.name&&d.attr(b.name,b.value)});d.addClass(l+u).css("border-right","ridge").width(0);b.each(C,function(c,g){a.find(g).each(function(a,c){k=b(c).find(">tr");0<k.length&&(f=d,""!=g&&(f=b("<"+g+"/>")),b.each(k,function(a,c){n=b("<tr/>");n.outerHeight(b(c).outerHeight());b.each(c.attributes,function(a,b){"id"!==b.name&&n.attr(b.name,b.value)});r=b(c).find(">th:"+w+"(-n+"+e.staticColumns+"),>td:"+w+"(-n+"+e.staticColumns+")");r.appendTo(n);b(f).append(n)}),""!=g&&d.append(f))})});a.before(d); a.wrap(x+m+'" style="float:left;'+p+":scroll;"+p+'-y:hidden;"/>');d.wrap(x+v+'" style="float:left;"/>');e.scrollHintEnabled&&F(a,h)}D(a,0);c=A(a);for(z=0;c.sc.position().top<c.oc.position().top&&0<c.oc.width();)z++,D(a,z)}function H(a){a.parent().hasClass(m)&&(c=A(a),d=c.sc.find("."+l+u),b.each(C,function(c,e){d.find(e).each(function(c,d){k=b(d).find(">tr");0<k.length&&(f=a,""!=e&&(f=a.find(e+":eq("+c+")")),b.each(k,function(a,c){var d=a+1;r=b(c).find(">th,>td");r.prependTo(f.find(">tr:"+w+"("+d+ ")"))}))})}),c.sc.remove(),a.unwrap().unwrap())}function E(a){q=a.width();a.parent().hasClass(m)&&(q+=b("."+v).width());y=!1;a.parents().each(function(){if(!b(this).hasClass(m)&&q>b(this).width())return y=!0,!1});y?G(a):H(a)}h=b(window);B={staticColumns:1,scrollRight:!0,scrollHintEnabled:!0,scrollHintDuration:2E3};e=b.extend(B,e);return this.each(function(){var a=b(this);a.hasClass(l+u)||(h.on("resize orientationchange",function(){E(a)}),E(a))})}})(jQuery);
